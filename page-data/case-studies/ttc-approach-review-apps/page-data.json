{"componentChunkName":"component---src-templates-case-study-jsx","path":"/case-studies/ttc-approach-review-apps/","webpackCompilationHash":"9d4159465830aecc5858","result":{"data":{"images":{"edges":[]},"markdownRemark":{"htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We did a "},{"type":"element","tagName":"a","properties":{"href":"../ttc/"},"children":[{"type":"text","value":"lot of work at the Travel Corporation"}]},{"type":"text","value":", this describes some of the more technical aspects of our engagement. We also used "},{"type":"element","tagName":"a","properties":{"href":"../ttc-approach/"},"children":[{"type":"text","value":"A Monorepo, Feature Toggles, and Designed APIs for Real Users"}]},{"type":"text","value":" and "},{"type":"element","tagName":"a","properties":{"href":"../ttc-approach-testing/"},"children":[{"type":"text","value":"Wrote Automated Tests for Every Feature"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Also, see the details of our implementation of Review Apps at "},{"type":"element","tagName":"a","properties":{"href":"../../blog/eks/"},"children":[{"type":"text","value":"Using EKS to Deploy All Your Pull Requests"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"deploying-all-the-pull-requests"},"children":[{"type":"element","tagName":"a","properties":{"href":"#deploying-all-the-pull-requests","ariaLabel":"deploying all the pull requests permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Deploying All the Pull Requests"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Automated testing can only hope to execute scenarios that you can think of ahead of time. To compliment that, manual exploratory testing gives the team a chance to find new and interesting scenarios and conditions - especially when integrating with complex external systems. Scenarios that do cause bugs are of course are included as automated tests, so we continue to have good automated regression coverage."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"However we found that we had a problem integrating manual testing into our release cycle, and I suspect we weren‚Äôt the only team to experience this. Here‚Äôs how our release cycle originally worked:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/7f2fd1cc7d83b73226cc0c99480b6df0/5e6b6/test-on-master.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 109.3939393939394%; position: relative; bottom: 0; left: 0; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"test-on-master","title":"test-on-master","src":"/static/7f2fd1cc7d83b73226cc0c99480b6df0/b9e4f/test-on-master.png","srcSet":["/static/7f2fd1cc7d83b73226cc0c99480b6df0/cf440/test-on-master.png 148w","/static/7f2fd1cc7d83b73226cc0c99480b6df0/d2d38/test-on-master.png 295w","/static/7f2fd1cc7d83b73226cc0c99480b6df0/b9e4f/test-on-master.png 590w","/static/7f2fd1cc7d83b73226cc0c99480b6df0/f9b6a/test-on-master.png 885w","/static/7f2fd1cc7d83b73226cc0c99480b6df0/5e6b6/test-on-master.png 990w"],"sizes":["(max-width:","590px)","100vw,","590px"],"loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We‚Äôd make a new feature branch. The feature branch would have automated tests running on a continuous integration server. When these tests were all good, and reviews were positive, we‚Äôd merge. Only then would we be able to do our manual exploratory and acceptance testing. At this point it‚Äôs likely that this testing would reveal issues that meant we weren‚Äôt able to release the code, resulting in our master branch being polluted with features that weren‚Äôt releasable."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["float-right"]},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 560px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/326da21918e4b1c33cd9d83f40fe0bbc/02744/master-branch.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 100.17857142857143%; position: relative; bottom: 0; left: 0; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"master-branch","title":"master-branch","src":"/static/326da21918e4b1c33cd9d83f40fe0bbc/02744/master-branch.png","srcSet":["/static/326da21918e4b1c33cd9d83f40fe0bbc/cf440/master-branch.png 148w","/static/326da21918e4b1c33cd9d83f40fe0bbc/d2d38/master-branch.png 295w","/static/326da21918e4b1c33cd9d83f40fe0bbc/02744/master-branch.png 560w"],"sizes":["(max-width:","560px)","100vw,","560px"],"loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now compound this issue with multiple in-flight features and bug fixes from developers on our own team, and accepting changes from developers on several other teams, this quickly became a major bottleneck for release. We essentially have a master that is full of features already released, features unreleased but untested (ü§∑‚Äç‚ôÄÔ∏èü§∑‚Äç‚ôÇÔ∏è), features tested and passed (‚úÖ) and features tested and failed (‚ùå). The result was that we spent a lot of time trying to figure out if we were ok to release‚Ä¶ and there were always new features being merged‚Ä¶ a situation that was becoming very difficult to manage (ü§Ø)!"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Following Heroku‚Äôs lead on what they called "},{"type":"element","tagName":"a","properties":{"href":"https://devcenter.heroku.com/articles/github-integration-review-apps","target":"_blank","rel":["nofollow"]},"children":[{"type":"text","value":"Review Apps"}]},{"type":"text","value":", we decided to build a new, isolated, fully working environment for each and every new pull-request submitted to the repository. This meant that we could perform manual exploratory testing on each feature before it was merged into the master branch. We could also perform integration testing with external partners, or demo it to other stakeholders and integrate valuable feedback before merging. The process looks a bit like this:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/5bcac9dedf6e0ed98ebf8bcd5bae8d58/89595/test-on-branch.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 87.18894009216591%; position: relative; bottom: 0; left: 0; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"test-on-branch","title":"test-on-branch","src":"/static/5bcac9dedf6e0ed98ebf8bcd5bae8d58/b9e4f/test-on-branch.png","srcSet":["/static/5bcac9dedf6e0ed98ebf8bcd5bae8d58/cf440/test-on-branch.png 148w","/static/5bcac9dedf6e0ed98ebf8bcd5bae8d58/d2d38/test-on-branch.png 295w","/static/5bcac9dedf6e0ed98ebf8bcd5bae8d58/b9e4f/test-on-branch.png 590w","/static/5bcac9dedf6e0ed98ebf8bcd5bae8d58/f9b6a/test-on-branch.png 885w","/static/5bcac9dedf6e0ed98ebf8bcd5bae8d58/89595/test-on-branch.png 1085w"],"sizes":["(max-width:","590px)","100vw,","590px"],"loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Following this, our master branch was now virtually always releasable. We still liked to do a few manual smoke tests on things before we went for release, but our release frequency went from (at the time) once every week or two down to once or twice per day. The effect was pretty obvious to everybody involved in the project."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"All new environments were listed in the pull requests on GitHub using the Deployment API so our developers and testers could easily access them."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/1c4f2779ddb8bb821e7ccae495d492fd/9d4f3/deploymentapi.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 20.314735336194563%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAoklEQVQI101Oyw6DQAjc///D1vRijFrNPuw+YGFZi+3FyUAIzACmiSDVnEsBAEQNreIfKRFRv0HFpbZSJWOjJoalJUjjOD2ewzC85mXZt239YZomRDxvkH5mUKdEaMRiiFkvJ72swlqJGKgTd+am1JaOsBI3uXh1uCBjvaYGqB45LuvufNA/Na0ObMg+HNYF54/3bj8xqVs36JbNw2yLZiT6AvjP5kVlNj5QAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"deploymentapi","title":"deploymentapi","src":"/static/1c4f2779ddb8bb821e7ccae495d492fd/b9e4f/deploymentapi.png","srcSet":["/static/1c4f2779ddb8bb821e7ccae495d492fd/cf440/deploymentapi.png 148w","/static/1c4f2779ddb8bb821e7ccae495d492fd/d2d38/deploymentapi.png 295w","/static/1c4f2779ddb8bb821e7ccae495d492fd/b9e4f/deploymentapi.png 590w","/static/1c4f2779ddb8bb821e7ccae495d492fd/f9b6a/deploymentapi.png 885w","/static/1c4f2779ddb8bb821e7ccae495d492fd/2d849/deploymentapi.png 1180w","/static/1c4f2779ddb8bb821e7ccae495d492fd/9d4f3/deploymentapi.png 1398w"],"sizes":["(max-width:","590px)","100vw,","590px"],"loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The tech behind this was originally a Flynn cluster for simplicity, but which we eventually dropped in favour of Kubernetes for better support and reliability, you can read more on how we did that in our blog on the subject, "},{"type":"element","tagName":"a","properties":{"href":"../../blog/eks/"},"children":[{"type":"text","value":"Using EKS to Deploy All Your Pull Requests"}]},{"type":"text","value":"."}]}],"data":{"quirksMode":false}},"fields":{"slug":"/case-studies/ttc-approach-review-apps/"},"frontmatter":{"date":"May 21, 2019","title":"The Travel Corporation: Review Apps","subtitles":["Deploy All the Pull Requests!"],"keywords":["The Travel Corporation","Online Booking Engine","API"],"hidden":true}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"absolutePathRegex":"/^/Volumes/dev/featurist-site-2019/src/data/case-studies/ttc-approach-review-apps/images/","slug":"/case-studies/ttc-approach-review-apps/","prev":null,"next":{"fileAbsolutePath":"/Volumes/dev/featurist-site-2019/src/data/case-studies/ttc-approach-testing/index.md","fields":{"slug":"/case-studies/ttc-approach-testing/"},"frontmatter":{"title":"The Travel Corporation: Automated Testing"}}}}}